{% extends 'worldmap/base.html' %}
{% load staticfiles %}
{% block content %}
    <div class="jumbotron planner" id="getstarted">
        <div class="container text-center landing">
            <h1>Get Started!</h1>
            <p>Your next adventure is just a few clicks away!</p>
            <button type="button" class="btn btn-success"><a href="#planner">Start planning</a></button>
        </div>
    </div>
    <div class="container-fluid text-center">
        <div class="row cat" id="planner">
            <div class="col-sm-12">
                <h2>Select one of the following categories</h2>
            </div>
            <div class="col-sm-12 categorybox">
                <div class="col-sm-6 travelcategory">
                    <section class="p12">
                        <a href="#juicebox-container" data-content="Nature" onclick="displayCategory('Nature')">Nature</a>
                    </section>
                </div>
                <div class="col-sm-6 travelcategory">
                    <section class="p16">
                        <a href="#juicebox-container" class="travelcategory" onclick="displayCategory('Citytrip')">Citytrip</a>
                    </section>
                </div>
              </div>
              <div class="col-sm-12 categorybox">
                <div class="col-sm-6 travelcategory">
                    <section class="p11">
                        <a href="#gallery" class="travelcategory" onclick="displayCategory('Road')">Road</a>
                    </section>
                </div>
                <div class="col-sm-6 travelcategory">
                  <section class="p15">
                    <a href="#gallery" class="travelcategory" onclick="displayCategory('All')">All
                      <div class="t1">
                        <div class="in"></div>
                      </div>
                      <div class="t2">
                        <div class="in"></div>
                      </div>
                    </a>
                  </section>
                </div>
            </div>
        </div>
      </div>
      <div class="row gallery" id="gallery">
        <div class="col-sm-12">
            <h2 id="header2">Select your favourite destination</h2>
        </div>
        <!--START JUICEBOX EMBED-->
            <script>
              new juicebox({
                baseUrl : "{% static 'images/galleryAll/' %}",
                containerId : "juicebox-container",
                galleryWidth: "90%",
                galleryHeight: "80%",
                backgroundColor: "transparent"
              });
            </script>
        <div id="juicebox-container"></div>
        <!--END JUICEBOX EMBED-->
        <button onclick="filterAfterLocation()">Filter World Map</button>
    </div>
        <div class="row map" id="worldmap">
            <div id="mapContainer">
                <h2>Map</h2>
                <div class="col-sm-8" id="map">

                </div>
            </div>

            <div class="col-sm-4 mapPhotos">
                <div class="col-sm-12">
                    <h3>Introduction ...</h3>
                    <p id="mapText">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus elementum, felis id bibendum vulputate, dui eros dapibus nunc, ut fringilla elit nulla eget libero. Quisque tempor viverra pulvinar. Suspendisse potenti. Ut imperdiet mattis feugiat. Vestibulum varius urna et turpis convallis condimentum. Nam pharetra vel diam porttitor luctus. In augue sem, lobortis in placerat non, tincidunt nec lorem. Curabitur et neque in mauris dapibus tristique. Curabitur sed facilisis lectus. Pellentesque laoreet tortor eget cursus dignissim. Aliquam non mattis nulla. Nunc pretium purus ut convallis mollis. Cras tempor risus velit, luctus tincidunt ex pharetra nec. Aliquam neque ipsum, mattis eu lobortis non, aliquet quis lectus. Quisque metus ipsum, cursus vitae rutrum eu, viverra in odio. Donec viverra semper ante vitae placerat.
                    </p>
                </div>
                <h3>Photos of your travel destination:</h3>
                <div class="col-sm-6" id="mapPhoto1">
                    <img src="https://centercityphila.org/uploads/attachments/cj1hy1ads08ev0oqdrc7f2evd-17-socc-intro.185.0.988.988.full.jpg">
                </div>
                <div class="col-sm-6" id="mapPhoto2">
                    <img src="https://centercityphila.org/uploads/attachments/cj1hy1ads08ev0oqdrc7f2evd-17-socc-intro.185.0.988.988.full.jpg">
                </div>
            </div>
        </div>
        <div class="row" id="weather">
          <h3> BUTTON IS ONLY A SUBSTITUTE TIL THE MAP WORKS <h3>
          <button id="selector">Denver</button>
                  <h3>Current Conditions</h3>
                  <div>
                    <div id="awxWeatherInfo"></div>
                  </div

        </div>
        <div class="row" id="transport/accomodation">
            <div class="col-sm-6">
            <h3>Flights</h3>
                <img src="https://thumbnails.trvl-media.com/XDLEvGqRCe48xzTW1YA1Bfw4klo=/media.expedia.com/media/content/expuk/graphics/landingpages/GMT/flightmerch/evergreen/image_gromerch-1640_532x299.jpg">
            </div>
            <div class="col-sm-6">
                <h3>Accomodation</h3>
                <img src="http://atigs2018.com/wp-content/uploads/2017/04/1-Hotel-Room.jpg"  style="max-width: 100%;">
            </div>
        </div>
        <div class="row" id="chat">
            <div class="col-sm-12">
                <h3>Chat</h3>
                <img src="https://www.codeproject.com/KB/WPF/1181555/Screenshot_1.png" style="max-width: 100%; max-height:100%;">
            </div>
        </div>
    </div>
<script>
    $('#map').smoothScroll();
    $('#gallery').smoothScroll();
    $('#worldmapgallery').smoothScroll();
    $(document).ready(initMap);
</script>
<script type="text/javascript">
    $(function () {
        var isMetric = false;
        var language = "en";
        var apiKey = "hoArfRosT1215";
        var awxClearMessages = function() {

            $("#awxWeatherInfo").html("...");
            $("#awxWeatherUrl").html("...");
        }
        var awxCityLookUp = function (freeText) {
            awxClearMessages();
            locationUrl = "http://apidev.accuweather.com/locations/v1/search?q=" + freeText + "&apikey=" + apiKey;
            $.ajax({
                type: "GET",
                url: locationUrl,
                dataType: "jsonp",
                cache: true,                    // Use cache for better reponse times
                jsonpCallback: "awxCallback",   // Prevent unique callback name for better reponse times
                success: function (data) { awxCityLookUpFound(data); }
            });
        };
        var awxCityLookUpFound = function (data) {
            var msg, locationKey = null;
            if (data.length == 1) {
                locationKey = data[0].Key;
                msg = "One location found: <b>" + data[0].LocalizedName + "</b>. Key: " + locationKey;
            }
            else if(data.length == 0) {
                msg = "No locations found."
            }
            else {
                locationKey = data[0].Key;
                msg = "Multiple locations found (" + data.length + "). Selecting the first one: " +
                    "<b>" + data[0].LocalizedName + ", " + data[0].Country.ID + "</b>. Key: " + locationKey;
            }
            $("#awxLocationInfo").html(msg);
            if(locationKey != null) {
                awxGetCurrentConditions(locationKey);
            }

        };
        var awxGetCurrentConditions = function (locationKey) {
            currentConditionsUrl = "http://apidev.accuweather.com/currentconditions/v1/" +
                locationKey + ".json?language=" + language + "&apikey=" + apiKey;
            $.ajax({
                type: "GET",
                url: currentConditionsUrl,
                dataType: "jsonp",
                cache: true,                    // Use cache for better reponse times
                jsonpCallback: "awxCallback",   // Prevent unique callback name for better reponse times
                success: function (data) {
                        var html;
                        if(data && data.length > 0) {
                            var conditions = data[0];
                            var temp = isMetric ? conditions.Temperature.Metric : conditions.Temperature.Imperial;
                            html = "<div id='WeatherTxt'>" + conditions.WeatherText + "</div>" +
                            "<div id='WeatherTemp'>" + temp.Value + " " + temp.Unit + "</div>" ;
                        }
                        else {
                            html = "N/A";
                        }
                    $("#awxWeatherInfo").html(html);
                }
            });
        };
        $("#selector").click(function () {
            var text = $("#selector").text();
            awxCityLookUp(text);
        });
    });
</script>

{% endblock %}
